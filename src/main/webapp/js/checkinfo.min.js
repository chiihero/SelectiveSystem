function changepassword(){var a=$("#password"),e=$("#newpassword"),t=$("#new_password_again");if(check_password(a.val()))return!1;if(check_password(e.val()))return!1;if(check_newpassword(t.val()))return!1;if(check_passwordtwo(e.val(),t.val()))return!1;if(a.val()===e.val())return alert("新密码不能与旧密码相同!"),!1;var r=/^[\w_-]{8,24}$/;if(!r.test(a.val())||!r.test(e.val())||!r.test(t.val()))return alert("密码格式不正确!"),!1;e.val(encrypt(e.val())),a.val(encrypt(a.val())),t.val(e.val())}function select_true(a){$("select option[value='"+a+"']").attr("selected",!0)}function check_studentdata(){var a=$("#sno"),e=$("#sname"),t=$("#sage"),r=$("#password");return!check_username(a.val())&&(!check_name(e.val())&&(!check_age(t.val())&&void(null!=r.val()&&(check_password(r.val())||r.val(encrypt(r.val()))))))}function check_teacherdata(){var a=$("#tno"),e=$("#tname"),t=$("#tage"),r=$("#cno1"),n=$("#cno2"),c=$("#cno3"),l=$("#password");return!check_username(a.val())&&(!check_name(e.val())&&(parseInt(t.val())<24||parseInt(t.val())>60||""===t.val()?(alert("年龄必须在24岁到60岁之间"),!1):0===r.val()&&0===n.val()||r.val()!==n.val()?0===r.val()&&0===c.val()||r.val()!==c.val()?0===n.val()&&0===c.val()||n.val()!==c.val()?void(null!=l.val()&&(check_password(l.val())||l.val(encrypt(l.val())))):(alert("2和3课程冲突"),!1):(alert("1和3课程冲突"),!1):(alert("1和2课程冲突"),!1)))}function check_age(a){return""===a&&(alert("年龄不能为空!!"),!0)}function check_name(a){return""===a&&(alert("姓名不能为空!!"),!0)}function check_id(a){return""===a&&(alert("ID不能为空!!"),!0)}function check_username(a){return""===a&&(alert("用户号不能为空!!"),!0)}function check_password(a){return(""===a||!/^[\w_-]{8,24}$/.test(a))&&(alert("密码格式不正确!"),!0)}function check_newpassword(a){return""===a&&(alert("确认密码不能为空!"),!0)}function check_passwordtwo(a,e){return a!==e&&(alert("确认密码不一致!"),!0)}function encrypt(a){try{var e=new jsSHA("SHA3-512","TEXT",{numRounds:parseInt("4096",10)});e.update(a),a=e.getHash("HEX"),console.log(a)}catch(a){alert(a.message)}return hex_md5(a)}function post(a,e){$.ajax({url:a,aysnc:!1,type:"post",contentType:"application/json; charset=utf-8",data:e,success:function(a){return!0},error:function(a,e,t){return alert("请求失败，消息："+e+"  "+t),!1}})}$("#xlsx").click(function(){var a=$("#grid-data thead tr th").length;$("tr").find("button").length>0&&(a-=1),$("#grid-data").tableExport({type:"xlsx",ignoreColumn:[a],bootstrap:!0})}),$("#xls").click(function(){$("#grid-data").tableExport({type:"excel",ignoreColumn:[length],bootstrap:!0})}),$("#csv").click(function(){$("#grid-data").tableExport({type:"csv",ignoreColumn:[length],bootstrap:!0})});